(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{31:function(e,t,a){e.exports=a(60)},60:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(27),c=a.n(r),l=a(7),i=a(2),s=Object(i.a)(),u=a(8),m=a.n(u),f=a(11),v=a(5),d=a(28),p=a.n(d),g=a(12),y=a.n(g);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var b=o.a.createElement("title",null,"Clear Query"),O=function(e){var t=e.svgRef,a=e.title,n=E(e,["svgRef","title"]);return o.a.createElement("svg",h({width:512,height:512,viewBox:"0 0 512 512",ref:t},n),void 0===a?b:a?o.a.createElement("title",null,a):null,o.a.createElement("line",{x1:368,y1:368,x2:144,y2:144,style:{fill:"none",stroke:"#bbb",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}),o.a.createElement("line",{x1:368,y1:144,x2:144,y2:368,style:{fill:"none",stroke:"#bbb",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32}}))},N=o.a.forwardRef((function(e,t){return o.a.createElement(O,h({svgRef:t},e))})),S=(a.p,function(e,t,a){return console.log(t),t?o.a.createElement("button",{onClick:function(){!function(e){var t=JSON.parse(localStorage.getItem("favorites")).filter((function(t){return t.locationDetails.key!==e}));localStorage.setItem("favorites",JSON.stringify(t))}(e.locationDetails.key),a(!1)}},"Remove from favorites"):o.a.createElement("button",{onClick:function(){!function(e){if(localStorage.getItem("favorites")){var t=JSON.parse(localStorage.getItem("favorites"));t.push(e),localStorage.setItem("favorites",JSON.stringify(t))}else localStorage.setItem("favorites",JSON.stringify([e]))}(e),a(!0)}},"Add to favorites")}),k=function(e,t){return e.map((function(e){return o.a.createElement("div",{className:"favorite",key:e.locationDetails.locationKey},o.a.createElement("div",null,e.locationDetails.locationName),e.forecasts.dailyForecasts[0].Temperature.Maximum.Value,"\xb0",o.a.createElement("button",{onClick:function(){return function(e,t){var a=JSON.parse(localStorage.getItem("favorites")).filter((function(t){return t.locationDetails.locationName!==e}));localStorage.setItem("favorites",JSON.stringify(a)),t(a)}(e.locationDetails.locationName,t)}},"Remove"))}))},j=function(){var e=Object(f.a)(m.a.mark((function e(t,a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=P325o4iUPsOKEA6GV2byFNsBRqEWh25I&q="+t);case 3:n=e.sent,a(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Network error. Please check your connection and try again.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n={},e.prev=2,e.next=5,y.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t.Key,"?apikey=XmwZ0Xg7fBum5BgGI09qAA9EmvG7D755&metric=true"));case 5:return o=e.sent,a.headline=o.data.Headline,a.dailyForecasts=o.data.DailyForecasts,n.locationName=t.LocalizedName,n.locationKey=t.Key,console.log("fetchForecasts"),console.log({forecasts:a,locationDetails:n}),e.abrupt("return",{forecasts:a,locationDetails:n});case 15:e.prev=15,e.t0=e.catch(2),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.handleSetSelection,a=Object(n.useState)(""),r=Object(v.a)(a,2),c=r[0],l=r[1],i=Object(n.useState)([]),s=Object(v.a)(i,2),u=s[0],m=s[1];return o.a.createElement("div",{className:"auto-complete"},o.a.createElement("input",{type:"text",placeholder:"Enter a location to search for",value:c,onChange:function(e){return function(e,t,a){var n=e.target.value;a(n),n.length<2?t([]):j(n,t)}(e,m,l)}}),function(e,t,a){if(e)return o.a.createElement(N,{className:"clear-search",onClick:function(){t(""),a([])}})}(c,l,m),function(e,t,a,n){return e.length?o.a.createElement("ul",null,e.map((function(e){return o.a.createElement("li",{key:e.Key,onClick:function(){a(e.LocalizedName),t([]),n(e),console.log("suggestions"),console.log(e)}},e.LocalizedName)}))):null}(u,m,l,t))},x=function(e){var t=e.location,a=JSON.parse(localStorage.getItem("favorites")),r=Object(n.useState)(null),c=Object(v.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){if(a&&a.length){console.log(a),console.log(t.locationDetails.locationKey);for(var e=0;e<a.length;e++)a[e].locationDetails.locationKey===t.locationDetails.locationKey?i(!0):i(null)}}),[t.locationDetails.locationKey]),t.forecasts.dailyForecasts&&t.locationDetails.locationName?o.a.createElement("div",{className:"location-info"},o.a.createElement("div",{className:"location-info-header"},o.a.createElement("div",null,t.locationDetails.locationName,o.a.createElement("br",null),o.a.createElement("span",null,t.forecasts.dailyForecasts[0].Temperature.Maximum.Value,"\xb0")),o.a.createElement("div",null,S(t,l,i))),o.a.createElement("div",{className:"location-info-body"},t.forecasts.dailyForecasts[0].Day.IconPhrase),o.a.createElement("div",{className:"location-info-footer"},t.forecasts.dailyForecasts.map((function(e){return o.a.createElement("div",{className:"favorite",key:e.Date},o.a.createElement("span",null,p()(e.Date).format("dddd, D/M")),o.a.createElement("span",null,e.Temperature.Maximum.Value,"\xb0"),o.a.createElement("span",null,e.Day.IconPhrase))})))):"Loading..."},I=function(){var e=function(){var e=Object(n.useState)({}),t=Object(v.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)({}),c=Object(v.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){y.a.get("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat("215854","?apikey=XmwZ0Xg7fBum5BgGI09qAA9EmvG7D755&metric=true")).then((function(e){var t=e.data.Headline,a=e.data.DailyForecasts;i({headline:t,dailyForecasts:a})})).catch((function(e){return console.log(e)})),y.a.get("https://dataservice.accuweather.com/locations/v1/".concat("215854","?apikey=XmwZ0Xg7fBum5BgGI09qAA9EmvG7D755&metric=true")).then((function(e){var t=e.data.EnglishName,a=e.data.LocalizedName,n=e.data.Key;o({locationName:t,localizedName:a,locationKey:n})})).catch((function(e){return console.log(e)}))}),[]),{locationDetails:a,forecasts:l}}(),t=Object(n.useState)({forecasts:{}}),a=Object(v.a)(t,2),r=a[0],c=a[1],l=function(){var e=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:a=e.sent,c(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?o.a.createElement("div",{className:"page"},o.a.createElement("div",{className:"search"},o.a.createElement(w,{handleSetSelection:l})),o.a.createElement("div",{className:"content"},o.a.createElement(x,{location:(r.forecasts||{}).dailyForecasts?r:e}))):o.a.createElement("div",{className:"page"},"Enter a location to see a forecast!")},F=a(13),K=function(){return o.a.createElement("header",null,o.a.createElement("div",null,"Alika"),o.a.createElement("div",null,o.a.createElement(F.a,{to:"/"},"Home"),o.a.createElement(F.a,{to:"/favorites"},"Favorites")))},J=function(){var e=JSON.parse(localStorage.getItem("favorites")),t=Object(n.useState)(e),a=Object(v.a)(t,2),r=a[0],c=a[1];return r&&r.length?o.a.createElement("div",{className:"page"},o.a.createElement("div",{className:"favorites"},k(r,c))):o.a.createElement("div",{className:"page"},"You have no favorited locations")},A=function(){return o.a.createElement("div",null,o.a.createElement(l.b,{history:s},o.a.createElement(K,null),o.a.createElement(l.a,{path:"/",exact:!0,component:I}),o.a.createElement(l.a,{path:"/favorites",exact:!0,component:J})))};c.a.render(o.a.createElement(A,null),document.querySelector("#root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.c03ec219.chunk.js.map